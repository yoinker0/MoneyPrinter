<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exclusive Videos - Premium Content</title>
    <meta name="description" content="Premium exclusive video content - verify to unlock">
    
    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/components.css">
    
    <!-- Tailwind Config -->
    <script src="js/tailwind-config.js"></script>
</head>
<body class="bg-dark-bg text-white min-h-screen">
    <!-- Header -->
    <header class="border-b border-dark-border px-5 py-4 text-center">
        <h1 class="text-xl font-semibold text-white">Exclusive Videos</h1>
    </header>

    <!-- Video Grid -->
    <main class="px-4 py-5">
        <div id="videoGrid" class="grid grid-cols-2 gap-3 md:grid-cols-3 lg:grid-cols-4 xl:gap-5">
            <!-- Videos loaded dynamically -->
        </div>
        
        <!-- Loading indicator -->
        <div id="loadingIndicator" class="text-center py-8 text-light-text">
            <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-brand-pink"></div>
            <p class="mt-2">Loading videos...</p>
        </div>
    </main>

    <!-- Verification Overlay -->
    <div id="verificationOverlay" class="verification-overlay hidden">
        <div class="verification-popup">
            <!-- Header -->
            <div class="popup-header">
                <svg class="verification-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z"/>
                </svg>
                <div class="header-text">
                    <h2>Verification Required</h2>
                </div>
                <div class="recaptcha-logo">
                    reCAPTCHA
                </div>
            </div>

            <!-- Content -->
            <div class="popup-content">
                <!-- Main checkbox area -->
                <div class="verification-checkbox-area" id="mainCheckbox">
                    <div class="custom-checkbox" id="checkbox">
                        <div class="loading-spinner" id="loadingSpinner" style="display: none;"></div>
                        <svg class="checkmark" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"/>
                        </svg>
                    </div>
                    <div class="verification-text">I'm not a robot</div>
                </div>

                <!-- Challenge section -->
                <div class="verification-options" id="challengeSection">
                    <a href="#" class="affiliate-option" data-option-id="instabang">
                        <div class="option-text">Continue with Instabang</div>
                    </a>
                    
                    <a href="#" class="affiliate-option" data-option-id="bootycallz">
                        <div class="option-text">Continue with BootyCallz</div>
                    </a>
                </div>
            </div>

            <!-- Footer -->
            <div class="verification-footer">
                <div class="footer-left">
                    <svg class="privacy-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z"/>
                    </svg>
                    <span>Privacy - Terms</span>
                </div>
                <div class="footer-links">
                    <a href="#">Privacy</a>
                    <a href="#">Terms</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/analytics.js"></script>
    <script src="js/verification-popup.js"></script>
    <script src="js/video-manager.js"></script>
    <script src="js/app.js"></script>
    
    <script>
        // Initialize verification popup checkbox interaction
        function startVerification() {
            console.log('startVerification called');
            
            const checkbox = document.getElementById('checkbox');
            const spinner = document.getElementById('loadingSpinner');
            const challengeSection = document.getElementById('challengeSection');
            const mainCheckbox = document.getElementById('mainCheckbox');
            
            if (!checkbox || !spinner || !challengeSection || !mainCheckbox) {
                console.error('Missing required elements for verification');
                return;
            }
            
            // Show loading state
            spinner.style.display = 'block';
            checkbox.classList.add('loading');
            mainCheckbox.classList.add('loading');
            
            // Simulate loading time
            setTimeout(() => {
                // Hide spinner and show checkmark
                spinner.style.display = 'none';
                checkbox.classList.remove('loading');
                checkbox.classList.add('checked');
                
                // Show challenge after a short delay
                setTimeout(() => {
                    challengeSection.classList.add('active');
                }, 500);
            }, 1500);
        }

        // Global function for affiliate redirects with loading overlay
        function handleVerification(optionId) {
            console.log('handleVerification called with:', optionId);
            
            // Immediately show loading overlay
            showRedirectOverlay();
            
            // Get the affiliate URL
            const affiliateUrls = {
                'instabang': 'https://t.mbsrv2.com/388143/5380?aff_sub5=SF_006OG000004lmDN',
                'bootycallz': 'https://t.mbsrv2.com/388143/7411?bo=2753,2754,2755,2756&popUnder=true&aff_sub5=SF_006OG000004lmDN'
            };
            
            const url = affiliateUrls[optionId];
            if (!url) {
                console.error('No URL found for option:', optionId);
                return;
            }
            
            // Store verification completion
            localStorage.setItem('verificationCompleted', 'true');
            
            // Track the click if analytics exists
            if (window.analytics) {
                window.analytics.trackAffiliateClick(optionId);
            }
            
            // Small delay to ensure overlay renders, then redirect
            setTimeout(() => {
                window.location.href = url;
            }, 100);
        }

        // Show loading overlay for redirects
        function showRedirectOverlay() {
            const overlay = document.createElement('div');
            overlay.id = 'redirectOverlay';
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.9);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                color: white;
                font-family: Arial, sans-serif;
            `;
            
            overlay.innerHTML = `
                <div style="text-align: center;">
                    <div style="width: 50px; height: 50px; border: 3px solid #333; border-top: 3px solid #fff; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
                    <div style="font-size: 18px; margin-bottom: 10px;">Redirecting...</div>
                    <div style="font-size: 14px; opacity: 0.8;">Please wait</div>
                </div>
                <style>
                    @keyframes spin {
                        0% { transform: rotate(0deg); }
                        100% { transform: rotate(360deg); }
                    }
                </style>
            `;
            
            document.body.appendChild(overlay);
            
            // Hide verification popup
            const verificationOverlay = document.getElementById('verificationOverlay');
            if (verificationOverlay) {
                verificationOverlay.classList.add('hidden');
            }
        }

        // Set up event listeners when DOM loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, setting up event listeners');
            
            // Set up checkbox click
            const mainCheckbox = document.getElementById('mainCheckbox');
            if (mainCheckbox) {
                mainCheckbox.addEventListener('click', startVerification);
            }
            
            // Set up affiliate option clicks - use event delegation
            document.addEventListener('click', function(e) {
                const affiliateOption = e.target.closest('.affiliate-option');
                if (affiliateOption) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const optionId = affiliateOption.getAttribute('data-option-id');
                    if (optionId) {
                        handleVerification(optionId);
                    }
                }
            });
        });
    </script>

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "VideoGallery",
        "name": "Exclusive Videos",
        "description": "Premium exclusive video content",
        "url": ""
    }
    </script>
</body>
</html>